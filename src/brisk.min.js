"use strict";var tBlobUrl,LowCaseIndex,Brisk,B_;if(String.prototype.replaceChr||(String.prototype.replaceChr=function(n,t){var i=(this+"").split("");return i[n]=t,i.join("")}),String.prototype.replaceAt||(String.prototype.replaceAt=function(n,t,i){var r=(this+"").split("");return r.splice(n,t-n,i),r.join("")}),String.prototype.trim||(String.prototype.trim=function(){return(this+"").replace(/^\s+|\s+$/gmi,"")}),String.prototype.startsWith||(String.prototype.startsWith=function(n){return(this+"").substr(0,n.length)===n}),String.prototype.endsWith||(String.prototype.endsWith=function(n){var t=this+"",i=t.length-n.length;return t.indexOf(n,i)===i}),String.prototype.toBool||(String.prototype.toBool=function(){var n=(this+"").trim();return!/^(false|true|1|0|yes|no|on|off|set|clear)(?!.+)$/gmi.test(n)||/^(false|0|no|off|clear)(?!.+)$/gmi.test(n)?!1:!0}),Uint8Array.prototype.toFlatString||(Uint8Array.prototype.toFlatString=function(){for(var t=32768,n=0,i=this.length,r="",u;n<i;)u=this.subarray(n,Math.min(n+t,i)),r+=String.fromCharCode.apply(null,u),n+=t;return r}),Uint8Array.prototype.toBase64||(Uint8Array.prototype.toBase64=function(){return btoa(this.toFlatString())}),window.setIntervalW=setInterval,window.clearIntervalW=clearInterval,window.setTimeoutW=setTimeout,window.clearTimeoutW=clearTimeout,Worker&&URL&&URL.createObjectURL){Worker.threads={};Worker.threads.uid=0;var blobPrefix="self.addEventListener('message',function(e){switch(e.data.c){case 'a':self.active=e.data.v;break;case 's':var k=",blobSuffix="(function(){if(self.active)postMessage('');},e.data.t);postMessage({'k':k,'l':e.data.l});break;case 'c':clearInterval(e.data.k);break;}});",clearThread=function(n){var t=Worker.threads["_"+n];if(t){if(!t.key){t.key=0;t.postMessage({c:"a",v:!1});return}t.postMessage({c:"c",k:t.key});t.terminate();delete Worker.threads["_"+n]}},setThread=function(n,t,i){var r=++Worker.threads.uid;return r===0&&++Worker.threads.uid,Worker.threads["_"+r]=i,i.addEventListener("message",function(t){if(t.data){var r=Worker.threads["_"+t.data.l].key===0;i.key=t.data.k;r?clearThread(t.data.l):i.postMessage({c:"a",v:!0})}else n()},!1),i.postMessage({c:"s",t:t,l:r}),r},iBlobUrl=URL.createObjectURL(new Blob([blobPrefix+"setInterval"+blobSuffix]));window.setIntervalW=function(n,t){return setThread(n,t,new Worker(iBlobUrl))};window.clearIntervalW=clearThread;tBlobUrl=URL.createObjectURL(new Blob([blobPrefix+"setTimeout"+blobSuffix+";self.active=true;"]));window.setTimeoutW=function(n,t){return setThread(n,t,new Worker(tBlobUrl))};window.clearTimeoutW=clearThread}window.LowCaseIndex||(LowCaseIndex=function(n){var i=this,r,t,f,u;if(n){r=0;for(t in n)n.hasOwnProperty(t)&&(f=n[t],i[t]=f,u=t.toLowerCase(),u!==t&&Object.defineProperty(i,u,{__proto__:null,enumerable:!1,configurable:!1,get:function(n,t){return function(){return n[t]}}(i,t),set:function(n,t){return function(i){n[t]=i}}(i,t)}),i[r++]=t);i.length=r}return this.expectBool=function(n){var r=this,t=r[n.toLowerCase()],i=null;return typeof t=="function"&&(t=t(r)),typeof t=="string"?i=t.toBool():typeof t=="boolean"&&(i=t),i},this.expectNum=function(n){var r=this,t=r[n.toLowerCase()],i=null;return typeof t=="function"&&(t=t(r)),typeof t=="string"?i=new Number(t):typeof t=="number"&&(i=t),i},this.expectStr=function(n){var i=this,t=i[n.toLowerCase()];return(typeof t=="function"&&(t=t(i)),t===null||t===undefined)?null:typeof t=="string"?t:t+""},i},LowCaseIndex.prototype=[]);Brisk=Brisk||function(n,t){function i(){var r;this._ids={};this._attrs={};this._idAttributeName="br-id";this._debugAttributeName="br-debug";this._jsCallAttributeName="br-call";this._ajaxViewAttributeName="br-view";this._viewRefreshAttributeName="br-refresh";this._ajaxAttributeName="br-ajax";this._restGet="br-restGet";this._restPut="br-restPut";this._restPost="br-restPost";this._restPatch="br-restPatch";this._restDelete="br-restDelete";this._noSelectAttributeName="br-noSelect";this._noDragAttributeName="br-noDrag";this._allowedServerThreads=6;this._threadRetryInterval=100;this.isDebug=!1;this.rxNonNumber=/[^\d]+/gmi;this.rxNumeric=/[\d]+/gmi;this.domWatch=function(t,i){var f=n(t),r,u;f.on("DOMNodeInserted",function(n){r&&(clearTimeoutW(r),r=null);r=setTimeoutW(function(){i(n.target)},10)});f.on("DOMNodeRemoved",function(n){r&&(clearTimeoutW(r),r=null);u&&(clearTimeoutW(u),u=null);u=setTimeoutW(function(){i(n.target,!0)},10)})};this._setGetCaret=function(t){var i=t.currentTarget,r;i.brCaretRanging=!0;r=n(i).textrange();i.brCaretRanging=undefined;i.caretStart=r.start;i.caretEnd=r.end};this._installCaretTracking=function(t){if(t.brCaretSet)return!0;t.brCaretSet=!0;t.caretStart=0;t.caretEnd=0;n(t).on("keyup input focusin",function(n){return n.currentTarget.brCaretRanging||i._setGetCaret(n),!0});return!0};this.brInit=function(t,i,r){var e,u,o,f,s;r&&(i&&(e=function(i){i.brDown&&typeof i.brDown=="function"&&i.brDown(t);i.children&&i.children.length>0&&n(i.children).each(function(n,t){e(t)})},e(i)),t.idsLoaded=undefined,delete t._ids,t._ids={});u=n("["+t._idAttributeName+"]");u.length>0&&u.each(function(n,i){return t.brId(t,i)});t.idsLoaded=!0;u=n("input[type='text'],textarea");u.length>0&&u.each(function(n,i){return t._installCaretTracking(i)});o=t._attrs[t._debugAttributeName];o&&(u=n("["+t._debugAttributeName+"]"),u.length>0&&u.each(function(n,i){return o(t,i)}));for(f in t._attrs)t._attrs.hasOwnProperty(f)&&(s=t._attrs[f],typeof s=="function"&&f!==t._debugAttributeName&&(u=n("["+f+"]"),u.length>0&&u.each(function(n,i){return s(t,i)})));u=n("["+t._jsCallAttributeName+"]");u.length>0&&u.each(function(n,i){return t.brCall(t,i)})};this.brId=function(n,t){var r=t.attributes[n._idAttributeName],i=r.value.trim();t.brId&&t.brId===i&&n.idsLoaded||(t.brId=i,n._ids[i]=t)};this.brCall=function(n,i){var o,b,h,c,k,u,d,v;if(!i.brCallSet){i.brCallSet=!0;var g=i.attributes[n._jsCallAttributeName],it=g.value,nt=it.split(";");for(o=0;o<nt.length;o++){var r=nt[o].trim(),y=t,s=0;do{var p=r,tt=r.length,f=r.indexOf("(",s)+1,w=r.indexOf(")",f);if(f>s||w>f)tt=f-1,p=r.substring(0,tt);else{eval(p);continue}for(b=r.substring(f,w).split(","),h=[],c=0;c<b.length;c++){var l=b[c].trim(),e=l.indexOf("{{")+2,a=null;if(e>1)k=l.indexOf("}}",e)-2,k>e&&(a=n._ids[l.substring(e,e+k).trim()]);else try{a=eval(l)}catch(rt){a=null}h.push(a)}for(u=y,d=p.split("."),v=0;v<d.length;v++)u=u[d[v]];try{u&&(y=u.apply(i,h))}catch(rt){y=u.apply(t,h)}s=r.indexOf(").",w)+2}while(s>1)}g.value=""}return null};this.parseJSON=function(n,t,r){var u=[],a=function(n){var t,i;for(n="["+n+"]",n=n.replace(/\{\{(?!\{)(?=[^\}]+\}\})/gmi,"'{{");t=/'\{\{[^}]+\}\}(?!')/gmi.exec(n);)i=t.index+t[0].length-1,n=n.replaceChr(i,"}'");return eval(n)},l=function(n){var f=a(n),i=f[0],u;return typeof i=="function"&&(i=i(t,r)),typeof i!="string"||i.startsWith("{{")&&i.endsWith("}}")||!(i.startsWith("{")||i.startsWith("["))||(i=l(i)),typeof i!="object"&&(u=[],u.push(i),i=u),Array.isArray(i)||(i=new LowCaseIndex(i)),i},s,f,e,o,c,h;u=l(n);for(s in u)if(u.hasOwnProperty(s)&&!isNaN(s)){if(f=u[s],e=u[f],Array.isArray(u)&&(e=f,f=s),typeof e!="string")continue;o=e.indexOf("{{")+2;o>1&&(c=e.indexOf("}}",o)-2,h=null,c>o&&(h=i._ids[e.substring(o,o+c).trim()]),h?u[f]=h:console.log("parseJSON: "+t._idAttributeName+"="+u[f]+" in attribute ["+r.name+"] not found."))}return u};this._ajaxCall=function(i,r,u,f,e,o,s,h,c,l){s&&(n.support.cors=!0);n.ajax({beforeSend:function(t,i){var r=i.xhr;i.xhr=function(){var i=r();if(!e)return i;if(u&&u.command==="upload"&&u.upFile&&u.timeStamp&&u.fileName&&u.fileCount&&u.fileNumber&&u.fileParts&&u.part){var f=function(n){o("_"+u.timeStamp,u.timeStamp,u.fileName,u.fileCount,u.fileNumber,u.fileParts,u.part,n)},t=0,s=n(i.upload);s.on("progress",function(n){var i=t,r=n.originalEvent;r.total>r.loaded&&(i=Math.floor(r.loaded/r.total*100));i>0&&i<100&&i>t&&(t=i,f(i))});s.on("loadend",function(){t<100&&(t=100,f(100))})}return i}},headers:{Accept:h?h:"*/*",Host:t.location.Host},url:i,type:r?r:"GET",contentType:(h?h:"application/json")+";charset="+(c?c:"utf-8"),dataType:l?l:"json",cache:!1,crossDomain:s===undefined||s===null?!0:s,data:u,jsonpCallback:l==="jsonp"?f:null,success:l!=="jsonp"?f:null,error:f})};this.ajaxCall=function(i,r,u,f,e,o,s,h,c,l,a,v,y){var k=function(t,i,u){var f=t,a=f?f.readyState:null,c=f?f.status:null,l=f?f.responseText:null;c||(c=u.status,a=u.readyState,f=u,l=t);a===4&&(r.ajaxStarted=undefined,n.brServerThreads>0&&n.brServerThreads--,c===201&&e&&e.fileCount&&(r.uploadedCount===undefined&&(r.uploadedCount=0),r.uploadedCount++,r.uploadedCount>=e.fileCount&&(Element.uploadedCount=undefined)),o&&c>=200&&c<400?o(l,f):s&&s(l,f),n(r).css("cursor","inherit"),h&&(r.brStartStopThread&&clearTimeoutW(r.brStartStopThread),h(r,!1)))},b=null,p,w;c&&(b=function(n,i,u,f,o,s,h,l){var y=t.progressCompiler,a,p,d,b,v,w,g,k,nt;for(y||(y={},t.progressCompiler=y),a=y[n],a||(a=[],a.timeStamp=i,a.totalProgress=0,a.totalFiles=f,a.adjustedTotalFiles=f,y[n]=a),f<a.adjustedTotalFiles&&(a.adjustedTotalFiles=f),p=a[o-1],p||(p=[],p.totalParts=s,a[o-1]=p),p[h-1]=l,d=0,b=0;b<a.length;b++)if(v=a[b],v){if(w=0,v.complete)w=100;else{for(g=0,k=0;k<v.totalParts;k++)nt=v[k],nt&&(g+=nt);w+=Math.floor(g/v.totalParts);w>99&&(v.complete=!0)}d+=Math.floor(w/a.adjustedTotalFiles)}a.totalProgress=d;c(a.totalProgress);l>99&&e.upFile&&delete e.upFile;a.totalProgress>99&&(r.progressComplete=!0,delete y[n])});h&&(r.brStartStopThread=setTimeoutW(function(){h(r,!0)},1));n(r).css("cursor","wait");n.brServerThreads||(n.brServerThreads=0);p=null;w=function(){n.brServerThreads<i._allowedServerThreads&&(r.progressComplete&&(r.progressComplete=undefined),r.ajaxStarted||(r.ajaxStarted=!0),n.brServerThreads++,p&&clearIntervalW(p),i._ajaxCall(u,f,e,k,c,b,l,a,v,y))};p=setIntervalW(w,i._threadRetryInterval);w()};this.gatherInputs=function(t){var i={},u=n(t),f=u.closest("form"),e=f.find("input, textarea, select"),r=0;return e.each(function(t,u){var f=n(u),o,e,s;if(!f.is(":visible")||(o=f[0].type.toLowerCase(),e=f[0].name,e||(e=f[0].id),e||(e=o+"_"+r),s=f.val(),o==="checkbox"&&(s=f.is(":checked")),o==="radio"&&!f.is(":checked")))return!0;i[e]=s;r++}),i};r=function(n,t,r,u,f,e){var s=f,o;if(typeof f=="function")try{s=f(t,r)}catch(h){e&&e(t,h,r)}return r.sendDataValue='{"origin":"'+location.href+'"',o=t.id?t.id:null,o&&(r.sendDataValue+=', "id":"'+o+'"'),o=t.name?t.name:null,o&&(r.sendDataValue+=', "name":"'+o+'"'),o=t.attributes[i._idAttributeName],o&&(r.sendDataValue+=', "brId":"'+o.value+'"'),s&&(typeof s=="object"?(t.brViewName=s.view,r.sendDataValue+=', "data":'+JSON.stringify(s)):r.sendDataValue+=', "data":"'+s+'"'),u&&(r.sendDataValue+=', "fields":'+JSON.stringify(n.gatherInputs(t))),r.sendDataValue+="}",r.sendDataValue};this.customAttributeWrap=function(n,i,r,u){var f,e,o;if(i["has_"+r])return null;i["has_"+r]=!0;f=i.attributes[r];e="";try{if(o=n.parseJSON(f.value,n,f),f.value.length>0&&o.length<1)throw"Failure to parse options properly.";u(o)}catch(s){e="ERROR: "+s;n.isDebug&&t.brDebugCall(s)}finally{f.value=e}};this.brAjax=function(t,i,u,f){var e=u?u:t._ajaxAttributeName;t.customAttributeWrap(t,i,e,function(u){var rt=n(i),v="",s=!1,ut=!0,e=u.expectBool("blocking"),w,b,k,d,c,o,g,l,nt,y,p,a,tt,it,h;if(e!==null&&(ut=e),w="click",e=u.expectStr("bindevent"),e){if(typeof e!="string")throw"[bindEvent] must be a space-separated string list of event names, or a single event name string.";w=e}if(b="",e=u.expectStr("data"),e&&(b=e),k="json",e=u.expectStr("returnformat"),e){v="[returnFormat] must be a string and have a value of `html`,`xml`,`json`, or `text`.";s=!1;e=e.trim().toLowerCase();switch(e){case"json":case"html":case"xml":case"text":k=e;break;default:s=!0}if(s)throw v;}if(d="utf-8",e=u.expectStr("encoding"),e){if(typeof e!="string")throw"[encoding] must be a string which conforms to charset content encoding standards for the desired browser.";d=e}if(c="json",o="application/json",e=u.expectStr("sendformat"),e){v="[sendFormat] must be a string and have a value of 'html','form','xml','json', or 'text'.";s=!1;e=e.trim().toLowerCase();switch(e){case"json":break;case"html":o="application/x-www-form-urlencoded";break;case"form":o="multipart/form-data";break;case"xml":o="text/xml";break;case"text":o="text/plain";break;default:s=!0}if(c=e,s)throw v;}if(g=f?f:"GET",e=u.expectStr("method"),e&&!f&&(g=e.toUpperCase()),l=null,e=u.errorcallback,e){if(typeof e!="function")throw"[errorCallback] is NOT required, but it must be a function delegate of format: function(sender, response, stateObject).";l=e}if(nt=null,e=u.startstopcallback,e&&typeof e=="function"&&(nt=e),y=null,e=u.callback,!e||typeof e!="function")throw"[callback] option is required and must be a function delegate of format: function(sender, response, stateObject).";y=e;p=!1;e=u.expectBool("crossdomain");e!==null&&(p=e);p||c!=="json"||(c="jsonp",o="text/plain");a=null;e=u.expectStr("url");e&&(a=e);a||(tt=rt.parent("form")[0],a=tt?tt.action:".");it=!1;e=u.expectBool("gatherinputs");e!==null&&(it=e);h=!1;rt.on(w,function(){var n,f,e;return ut&&h?!1:(h=!0,n=null,n=c!=="jsonp"?function(n,t){h=!1;t.data||(t.data=n);y(i,t,u)}:function(n,t,i,r){h=!1;y(n,t,i,r)},f=function(n,t){h=!1;l&&(t.data||(t.data=n),l(i,t,u))},e=r(t,i,u,it,b,l),t.ajaxCall(t,i,a,g,e,n,f,nt,null,p,o,d,k),!0)})})};this.brRestGet=function(n,t){n.brAjax(n,t,n._restGet,"GET")};this.brRestPut=function(n,t){n.brAjax(n,t,n._restPut,"PUT")};this.brRestPost=function(n,t){n.brAjax(n,t,n._restPost,"POST")};this.brRestPatch=function(n,t){n.brAjax(n,t,n._restPatch,"PATCH")};this.brRestDelete=function(n,t){n.brAjax(n,t,n._restDelete,"DELETE")};this.brView=function(t,i){var u=t._ajaxViewAttributeName;t.customAttributeWrap(t,i,u,function(u){var k=n(i),s=null,f=u.errorcallback,v,e,y,p,o,h,c,w;if(f){if(typeof f!="function")throw"[errorCallback] is NOT required, but it must be a function delegate of format: function(sender, response, stateObject).";s=f}v=null;f=u.startstopcallback;typeof f=="function"&&(v=f);e=null;f=u.url;f&&(e=f);e||(y=k.parent("form")[0],e=y?y.action:".");p="GET";f=u.method;f&&(p=f.toUpperCase());o=0;f=u.refreshinterval;f&&(typeof f=="string"&&(o=Number(f.replace(t.rxNonNumber,""))),typeof f=="number"&&(o=f));h=!1;f=u.delayed;typeof f=="string"?h=f.toBool():typeof f=="boolean"&&(h=f);c=!1;f=u.gatherinputs;typeof f=="string"?c=f.toBool():typeof f=="boolean"&&(c=f);w="";f=u.data;f&&(w=f);var l=null,a=!1,b=function(){if(!a){a=!0;i.brViewLoaded=!1;var f=function(t,r){a=!1;s?(r.data||(r.data=t),s(i,r,u)):n(i).html(t)},o=function(t,r){a=!1;n(i).html(t);l&&(l(r),l=null);i.brViewLoaded=!0},h=r(t,i,u,c,w,s);t.ajaxCall(t,i,e,p,h,o,f,v,null,!0,"application/json","utf-8","html")}};i.brViewRefresh=function(n){typeof n=="function"&&(l=n);b()};o>0&&setIntervalW(b,o*1e3);h||b()})};this.brRefresh=function(t,i){var r=t._viewRefreshAttributeName;t.customAttributeWrap(t,i,r,function(u){n(i).click(function(){var i,n;for(i in u)n=u[i],n&&typeof n.brViewRefresh=="function"?n.brViewRefresh():console.log("Call ["+r+"]: "+t._idAttributeName+"="+n+" not found.")})})};this.brNoSelect=function(t,i){var u=n(i),s=i.attributes[t._noSelectAttributeName],r=s.value.toBool();i.brHasNoSelect=!0;var f="selectstart",e=function(n){return n.target.brNoSelect===!0?(n.preventDefault(),!1):!0},o=function(t){t&&t.length>0&&t.each(function(t,i){var h=n(i),u,s;if(o(h.children()),i.brNoSelect!==undefined)return i.brNoSelect!==r&&(i.brNoSelect=r),!0;u=i.tagName.toLowerCase();s=r;(u==="input"||u==="textarea")&&(s=!1);i.brNoSelect=s;h.on(f,e);return!0})};if(o(u.children()),i.brNoSelect!==undefined){i.brNoSelect!==r&&(i.brNoSelect=r);return}i.brNoSelect=r;u.on(f,e)};this.brNoDrag=function(t,i){var u=n(i),s=i.attributes[t._noDragAttributeName],r=s.value.toBool();i.brHasNoDrag=!0;var f="dragstart",e=function(t){var i=n(t.target);return t.target.brNoDrag===!0?(i.click(),t.preventDefault(),!1):!0},o=function(t){t&&t.length>0&&t.each(function(t,i){var h=n(i),u,s;if(o(h.children()),i.brNoDrag!==undefined)return i.brNoDrag!==r&&(i.brNoDrag=r),!0;u=i.tagName.toLowerCase();s=r;(u==="input"||u==="textarea")&&(s=!1);i.brNoDrag=s;h.on(f,e);return!0})};if(o(u.children()),i.brNoDrag!==undefined){i.brNoDrag!==r&&(i.brNoDrag=r);return}i.brNoDrag=r;u.on(f,e)}}function r(){this.debugAttributeName=i._debugAttributeName;this.getCvElement=function(n){if(typeof n!="string")throw"getCvElement method passed invalid arguments";return i._ids[n]};this.registerAttr=function(n,t){if(typeof n!="string"&&typeof t!="function")throw"registerAttr method passed invalid arguments";if(i._attrs[n])throw"registerAttr: ["+n+"] attribute handler already registered";i._attrs[n]=t};this.unregisterAttr=function(n){if(typeof n!="string")throw"unregisterAttr method passed invalid arguments";if(n.toLowerCase()===i._idAttributeName)throw"unregisterAttr: you cannot change the ["+i._idAttributeName+"] attribute handler";if(!i._attrs[n])throw"unregisterAttr: ["+n+"] does not exist";i._attrs[n]=handler};this.firstKey=function(n){if(n)for(var t in n)if(t!=="foundIndex"&&n.hasOwnProperty(t))return t;return null};this.findPair=function(n,t){var u,i,f;if(typeof n=="object"&&typeof t=="string")for(u in n)if(i=n[u],f=r.firstKey(i),f&&t.toLowerCase()===f.toLowerCase())return i.foundIndex=u,i;return null};this.getUrlVarsJsonArray=function(n){for(var t,r,u,f,e=[],s=n,o=s.split("&"),i=0;i<o.length;i++)if(t=o[i],!(t.length<1)){if(r=null,u=t.split("="),u.length>1)try{t=decodeURIComponent(u[0]);r=decodeURIComponent(u[1])}catch(h){r=null}i===0&&(t=t.substr(1,t.length-1));f={};f[t]=r;e.push(f)}return e};this.objectToString=function(n,t){var i="",r;return n===null||typeof n=="undefined"?i="null":typeof n=="string"?(r="",t&&(r='"'),i=r+n+r):i=typeof n=="boolean"||typeof n=="number"?n+"":typeof n=="function"?n(t)+"":JSON.stringify(n),i};this.setLocationHash=function(n){var i,e,f,u,o;if(typeof n=="object"){i="#";for(e in n){f=n[e];for(u in f)u!=="foundIndex"&&f.hasOwnProperty(u)&&(i+=u,o=f[u],i+="="+encodeURIComponent(r.objectToString(o))+"&")}i.length>1&&(i=i.substr(0,i.length-1));t.brLocationChanging=!0;location.hash=i;setTimeoutW(function(){t.brLocationChanging=undefined},10)}};this.getLocationHash=function(){t.brLocationChanging=!0;var n=r.getUrlVarsJsonArray(location.hash);return setTimeoutW(function(){t.brLocationChanging=undefined},10),n};this.getHashValue=function(n){var t=null,u=r.getLocationHash(),i=r.findPair(u,n);return i&&(t=i[n]),t};this.setHashValue=function(n,t){var u=r.getLocationHash(),i=r.findPair(u,n);i||(i={},u.push(i));i[n]=t;r.setLocationHash(u)};this.killHashValue=function(n){var t=r.getLocationHash(),i=r.findPair(t,n);i&&(t.splice(i.foundIndex,1),r.setLocationHash(t))};this.sleep=function(n){for(var t=(new Date).getTime()+n,i;(new Date).getTime()<=t;)i=new Date};this.ajax=function(n,r,u,f,e){i.ajaxCall(i,t,n,r,JSON.stringify(u),f,f,null,null,null,null,null,e)};this.getUrl=function(){function i(){n.extend(this,location);this.toString=t}var t=function(){return this.protocol+"//"+this.host+this.pathname+this.search+this.hash};return new i}}var u,f={xul:{get:function(n){var t={position:this[0].selectionStart,start:this[0].selectionStart,end:this[0].selectionEnd,length:this[0].selectionEnd-this[0].selectionStart,text:this.val().substring(this[0].selectionStart,this[0].selectionEnd)};return typeof n=="undefined"?t:t[n]},set:function(n,t){typeof t=="undefined"&&(t=this[0].value.length);this[0].selectionStart=n;this[0].selectionEnd=t},replace:function(n){var t=this[0].selectionStart,r=this[0].selectionEnd,i=this.val();this.val(i.substring(0,t)+n+i.substring(r,i.length));this[0].selectionStart=t;this[0].selectionEnd=t+n.length}},msie:{get:function(n){var f=document.selection.createRange(),e,s;if(typeof f=="undefined")return e={position:0,start:0,end:this.val().length,length:this.val().length,text:this.val()},typeof n=="undefined"?e:e[n];var t=0,i=0,r=this[0].value.length,h=this[0].value.replace(/\r\n/g,"\n"),u=this[0].createTextRange(),o=this[0].createTextRange();return u.moveToBookmark(f.getBookmark()),o.collapse(!1),u.compareEndPoints("StartToEnd",o)===-1?(t=-u.moveStart("character",-r),t+=h.slice(0,t).split("\n").length-1,u.compareEndPoints("EndToEnd",o)===-1?(i=-u.moveEnd("character",-r),i+=h.slice(0,i).split("\n").length-1):i=r):(t=r,i=r),s={position:t,start:t,end:i,length:r,text:f.text},typeof n=="undefined"?s:s[n]},set:function(n,t){var i=this[0].createTextRange(),r,u;typeof i!="undefined"&&(typeof t=="undefined"&&(t=this[0].value.length),r=n-(this[0].value.slice(0,n).split("\r\n").length-1),u=t-(this[0].value.slice(0,t).split("\r\n").length-1),i.collapse(!0),i.moveEnd("character",u),i.moveStart("character",r),i.select())},replace:function(n){document.selection.createRange().text=n}}},e={get:function(n){return f[u].get.apply(this,[n])},set:function(n,t){var i=parseInt(n),r=parseInt(t),e;return typeof n=="undefined"?i=0:n<0&&(i=this[0].value.length+i),typeof t!="undefined"&&(e=t>=0?i+r:this[0].value.length+r),f[u].set.apply(this,[i,e]),this},setcursor:function(n){return this.textrange("set",n,0)},replace:function(n){return f[u].replace.apply(this,[String(n)]),this},insert:function(n){return this.textrange("replace",n)}};return n.fn.textrange=function(t){var i,r;if(typeof this[0]=="undefined")return this;if(typeof u=="undefined"&&(u="selectionStart"in this[0]?"xul":document.selection?"msie":"unknown"),u==="unknown")throw"Text Selection Unsupported";return i=null,document.activeElement!==this[0]&&(i=n(document.activeElement),this.select()),r=this,typeof t=="undefined"||typeof t!="string"?r=e.get.apply(this):typeof e[t]=="function"?r=e[t].apply(this,Array.prototype.slice.call(arguments,1)):n.error("Method "+t+" does not exist in jQuery.textrange"),i&&i.select(),r},i=new i,r=new r,r.registerAttr(i._ajaxViewAttributeName,i.brView),r.registerAttr(i._viewRefreshAttributeName,i.brRefresh),r.registerAttr(i._ajaxAttributeName,i.brAjax),r.registerAttr(i._restGet,i.brRestGet),r.registerAttr(i._restPut,i.brRestPut),r.registerAttr(i._restPost,i.brRestPost),r.registerAttr(i._restPatch,i.brRestPatch),r.registerAttr(i._restDelete,i.brRestDelete),r.registerAttr(i._noSelectAttributeName,i.brNoSelect),r.registerAttr(i._noDragAttributeName,i.brNoDrag),n(document).ready(function(){var t=function(n,t){i.brInit(i,n,t)};i.domWatch(n("body")[0],t,i);t()}),r};B_=Brisk($,window);Brisk=B_;